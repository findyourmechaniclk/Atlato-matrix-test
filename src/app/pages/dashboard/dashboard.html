<!-- dashboard.component.html -->

<!-- BACKGROUND IMAGE WRAPPER -->
<div class="dashboard-bg" *ngIf="backgroundImage"
     [ngStyle]="{
       'background-image': 'url(' + backgroundImage + ')',
       'background-size': backgroundSizeModeCss,
       'background-repeat': 'no-repeat',
       'background-position': 'center center'
     }"></div>

<!-- SETTINGS BUTTON -->
<button nz-button nzType="primary" class="settings-btn" (click)="openSettings()">Settings</button>

<!-- JSON output shown on the dashboard -->
<div style="position: relative; z-index: 10; margin: 12px 0 0 32px; max-width: 720px;">
  <label style="display:block; font-weight:600; color:#333; margin-bottom:6px;">Current settings JSON</label>
  <pre style="
      margin:0;
      padding:10px 12px;
      background:#0b1b22;
      color:#c7f0ff;
      border-radius:6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
      font-size:12px;
      white-space:pre-wrap;
      word-break:break-word;
    ">{{ settingsPreview | json }}</pre>
</div>

<!-- DASHBOARD SETTINGS MODAL -->
<app-dashboard-setting-pop-over
  [visible]="isSettingsOpen"
  [settingsData]="{
    columnsCount: columnsCount,
    minLayoutWidth: minLayoutWidth,
    marginBetweenWidgets: marginBetweenWidgets,
    applyMarginToSides: applyMarginToSides,
    autoFillLayoutHeight: autoFillLayoutHeight,
    backgroundColor: backgroundColor,
    backgroundSizeMode: backgroundSizeMode,
    backgroundSizeModes: backgroundSizeModes,
    backgroundImage: backgroundImage
  }"
  (close)="closeSettings()"
  (save)="saveSettings($event)"
  (imageSelected)="onImageSelected($event)"
  (settingsChanged)="updateSettingsPreview()"
></app-dashboard-setting-pop-over>
